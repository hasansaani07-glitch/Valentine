<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For You â¤ï¸</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
  background:linear-gradient(135deg,#ffd6e8,#ffe9f3,#ffc0cb);
  overflow:hidden;
}

/* dynamic viewport height for mobile */
.min-safe {
  min-height: 100svh;
}

/* floating hearts */
.heart{
  position:fixed;
  bottom:-20px;
  font-size:18px;
  animation:floatUp linear forwards;
  opacity:.7;
}
@keyframes floatUp{
  to{transform:translateY(-110vh);opacity:0;}
}

/* pop animation */
.pop{animation:pop .45s ease-out;}
@keyframes pop{
  0%{transform:scale(.9);opacity:0}
  100%{transform:scale(1);opacity:1}
}
</style>
</head>

<body class="min-safe flex items-center justify-center p-3 sm:p-6 font-sans">

<div id="app"
 class="bg-white/95 rounded-3xl shadow-2xl w-full max-w-md
 p-5 sm:p-8 text-center relative overflow-hidden pop">
</div>

<script>
const app=document.getElementById("app");

/* ---------- STORY ---------- */

const steps=[
{title:"Hey you ğŸ˜Š",text:"I made a tiny surprise page just for my shifu...",btn:"Continue"},
{title:"Small question ğŸ¤",text:"Do little moments become big memories?",btn:"Maybeâ€¦"},
{title:"Becauseâ€¦",text:"This might be one of those moments.",btn:"Tell me"},
{proposal:true}
];

let step=0;

function render(){
  const s=steps[step];

  if(!s.proposal){
    app.innerHTML=`
      <div class="space-y-5 sm:space-y-6 pop">
        <h2 class="text-xl sm:text-2xl font-bold text-pink-600">${s.title}</h2>
        <p class="text-base sm:text-lg text-gray-700">${s.text}</p>
        <button onclick="next()"
         class="w-full py-4 text-base sm:text-lg
         bg-pink-500 text-white rounded-xl shadow active:scale-95">
         ${s.btn}
        </button>
      </div>`;
  } else {
    proposal();
  }
}

function next(){ step++; render(); }

/* ---------- PROPOSAL ---------- */

let escapes=0;
const noTexts=["No ğŸ™ˆ","Nope ğŸ˜³","Still no ğŸ˜…","Missed ğŸ˜œ","Try again ğŸ˜"];

function proposal(){
  app.innerHTML=`
    <div class="space-y-5 sm:space-y-6">
      <h2 class="text-xl sm:text-2xl font-bold text-pink-600">
        Will you be my Valentine? â¤ï¸
      </h2>

      <div class="relative h-36 sm:h-40 mt-2">
        <button id="yesBtn"
          class="w-full py-4 text-base sm:text-lg
          bg-green-500 text-white rounded-xl shadow active:scale-95">
          Yes ğŸ’˜
        </button>

        <button id="noBtn"
          class="py-3 px-6 text-sm sm:text-base
          bg-red-500 text-white rounded-xl shadow
          absolute">
          No ğŸ˜ˆ
        </button>
      </div>
    </div>`;

  const yes=document.getElementById("yesBtn");
  const no=document.getElementById("noBtn");

  placeNoSafe(no);

  function placeNoSafe(btn){
    btn.style.left="10px";
    btn.style.bottom="10px";
  }

  function moveNo(btn){
    const pad=8;

    const maxX=app.clientWidth-btn.offsetWidth-pad;
    const maxY=app.clientHeight-btn.offsetHeight-pad;

    btn.style.left=Math.random()*maxX+"px";
    btn.style.top=Math.random()*maxY+"px";

    escapes++;
    btn.textContent=noTexts[escapes%noTexts.length];
    btn.style.transform=`scale(${Math.max(.65,1-escapes*.06)})`;
  }

  /* pointer safe for mobile + desktop */
  document.addEventListener("pointermove",e=>{
    const r=no.getBoundingClientRect();
    const d=Math.hypot(
      e.clientX-(r.left+r.width/2),
      e.clientY-(r.top+r.height/2)
    );
    if(d<85) moveNo(no);
  });

  no.addEventListener("touchstart",()=>moveNo(no));
  yes.onclick=celebrate;
}

/* ---------- CELEBRATE ---------- */

function celebrate(){
  confetti();
  app.innerHTML=`
    <div class="space-y-5 pop">
      <div class="text-4xl sm:text-5xl">ğŸ’–</div>
      <h2 class="text-xl sm:text-2xl font-bold text-pink-600">
        Thank you for choosing to be my valentine ğŸ¥°
      </h2>
      <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif"
       class="w-40 sm:w-52 mx-auto rounded-2xl shadow-xl">
      <p class="text-pink-500 font-semibold text-sm sm:text-base">
        You just made my day âœ¨
      </p>
    </div>`;
}

function confetti(){
  for(let i=0;i<80;i++){
    const c=document.createElement("div");
    c.style.position="fixed";
    c.style.width="8px";
    c.style.height="12px";
    c.style.left=Math.random()*100+"vw";
    c.style.top="-10px";
    c.style.background=`hsl(${Math.random()*360},80%,60%)`;
    c.style.animation="fall 1.8s linear forwards";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),2000);
  }
}

const s=document.createElement("style");
s.innerHTML="@keyframes fall{to{transform:translateY(110vh) rotate(720deg);opacity:0}}";
document.head.appendChild(s);

/* floating hearts */
function heart(){
  const h=document.createElement("div");
  h.className="heart";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(4+Math.random()*4)+"s";
  h.textContent=["â¤ï¸","ğŸ’–","ğŸ’•","ğŸ’˜"][Math.floor(Math.random()*4)];
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),8000);
}
setInterval(heart,650);

render();
</script>

</body>
</html>
